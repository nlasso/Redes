Para implementar la herramienta utilizamos paquetes de tipo ICMP.
Primeramente decidimos resolver el registro DNS a su IP correspondiente para evitar considerar el tiempo que pudiera tardar este procedimiento. Además, esto nos permite evitar el posible cambio de rutas producto de alguna universidad usando Round-robin DNS\footnote{https://en.wikipedia.org/wiki/Round-robin\_DNS}.

~

En el comienzo de nuestra implementación nuestra herramienta explora la ruta completa para estudiar los hosts que pertenecen a la misma. Decidimos limitar el crecimiento del $time to live$ a 35 ya que es un poco mayor que la que utilizan las herramientas provistas por Linux. De todos modos esto no afectó ya que llegamos a todos los hosts elegidos en menos saltos.

~

Luego de esto utilizamos la ruta descubierta para realizar 50 repeticiones de mediciones de RTT de forma incremental en el TTL. Como las rutas pueden cambiar, cuando detectamos un cambio en algún hop, reintentamos el echo-request con el mismo TTL hasta que coincidiera el host con el descubierto inicialmente.

~

Utilizamos el promedio de las mismas con el fin de tener valores más estables. Luego de calculado este promedio realizamos las restas uno a uno entre hops sucesivos para obtener los tiempos diferenciales a partir de los acumulados.

~

Para normalizar los datos para el análisis calculamos el valor Z del RTT de cada hop\footnote{Recordar que nos estamos refiriendo a la diferencia entre el RTT absoluto de un hop y el anterior}, que nos da una idea de cuánto se aleja cada RTT de la media, medido en desvíos standard. Para ello usamos la ecuación facilitada por el enunciado: $$ ZRTT_i = \dfrac{RTT_i-\overline{RTT}}{SRTT}$$ donde $\overline{RTT}$ es el promedio y $SRTT$ el desvío standard de la distribución de los RTTs para una ruta dada. Esto nos permite analizar los saltos con una información estadísticamente más sólida que la diferencia absoluta medida en $ms$.

~

Finalmente, para simular el throughput utilizamos la ecuación de Mathis
$$\frac{MSS}{EstimatedRTT * \frac{1}{\sqrt{EstimatedPacketLossProbability}}}$$
donde $EstimatedRTT$ se obtiene iterando sucesivas veces la ecuación
$$\alpha * EstimatedRTT + (1 - \alpha) * SampleRTT$$
y $EstimatedPacketLossProbability$ se calcula como $$\frac{\#Echo reply}{\#Echo request}$$

%TODO: Laski -- Por que se llama Estimated Packet Loss Probability si estima la probabilidad de que un paquete llegue bien? (Echos contestados sobre Echos enviados)